!function(){"use strict";angular.module("ngCroppie",[]).directive("ngCroppie",[function(o){return{restrict:"AE",scope:{src:"=",rotation:"=",viewport:"=",boundry:"=",type:"@",zoom:"@",mousezoom:"@",zoomslider:"@",exif:"@",orientation:"@",update:"=",ngModel:"="},link:function(o,e,n){void 0==o.viewport&&(o.viewport={w:null,h:null}),void 0==o.boundry&&(o.boundry={w:null,h:null}),o.viewport.w=void 0!=o.viewport.w?o.viewport.w:300,o.viewport.h=void 0!=o.viewport.h?o.viewport.h:300,o.boundry.w=void 0!=o.boundry.w?o.boundry.w:400,o.boundry.h=void 0!=o.boundry.h?o.boundry.h:400,o.viewport.w>o.boundry.w&&(o.viewport.w=o.boundry.w),o.viewport.h>o.boundry.h&&(o.viewport.h=o.boundry.h);var t="true"===o.zoom||void 0===o.zoom,i="true"===o.mousezoom||void 0===o.mousezoom,r="true"===o.zoomslider||void 0===o.zoomslider,u={viewport:{width:o.viewport.w,height:o.viewport.h,type:o.type||"square"},boundary:{width:o.boundry.w,height:o.boundry.h},enableZoom:t,mouseWheelZoom:i,showZoomer:r,enableExif:o.exif,enableOrientation:o.orientation};void 0!=o.update&&(u.update=o.update);var a,d=new Croppie(e[0],u),l=angular.element(e[0])[0],v=angular.element(e[0].getElementsByClassName("cr-boundary"))[0],c=v.getBoundingClientRect();l.addEventListener("mousedown",function(){a=window.setInterval(function(){d.result("canvas").then(function(e){o.$apply(function(){o.ngModel=e})})},250)},!1),i&&l.addEventListener("wheel",function(e){console.log("Wheel event called"),e.preventDefault(),e.clientX>c.left&&e.clientX<c.right&&e.clientY<c.bottom&&e.clientY>c.top&&d.result("canvas").then(function(e){o.$apply(function(){o.ngModel=e})})},!1),l.addEventListener("mouseup",function(){clearInterval(a)},!1),l.addEventListener("mouseleave",function(){clearInterval(a)},!1),l.addEventListener("mouseout",function(){clearInterval(a)},!1),o.$on("$destroy",function(o){clearInterval(a)}),o.$watch("rotation",function(e,n){if("false"===o.orientation||void 0==o.orientation)throw"ngCroppie: Cannot rotate without 'orientation' option";d.rotate(e-n)}),o.$watch("src",function(e,n){void 0!=o.src&&(d.bind(o.src),d.result("canvas").then(function(e){o.$apply(function(){o.ngModel=e})}))})}}}])}();